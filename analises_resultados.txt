# Relat√≥rio de An√°lises e Resultados

## 1. An√°lise de Correla√ß√£o Anual

A matriz de correla√ß√£o anual mostra a rela√ß√£o entre produtividade do milho, NDVI m√©dio anual, precipita√ß√£o, temperatura e umidade. Os principais achados foram:

- **Produtividade x NDVI (Savitzky-Golay):** Correla√ß√£o muito forte (r = 0.93, p-valor = 0.007). NDVI anual √© excelente preditor da produtividade, com signific√¢ncia estat√≠stica alta (p < 0.01).
- **Produtividade x Precipita√ß√£o:** Correla√ß√£o forte (r = 0.70, p-valor = 0.036). Chuva anual influencia positivamente a produtividade com signific√¢ncia estat√≠stica (p < 0.05).
- **Produtividade x Temperatura m√©dia:** Correla√ß√£o forte (r = 0.86, p-valor = 0.014). Temperaturas m√©dias mais altas associam-se a maior produtividade (mas aten√ß√£o ao contexto agron√¥mico).
- **Produtividade x Umidade:** Correla√ß√£o negativa moderada (r = -0.65, p-valor = 0.043). Pode indicar que anos mais √∫midos nem sempre s√£o os mais produtivos, dependendo da distribui√ß√£o das chuvas.
- **NDVI x Precipita√ß√£o:** Correla√ß√£o alt√≠ssima (r = 0.89, p-valor = 0.010). NDVI responde fortemente √† chuva, mostrando que vegeta√ß√£o e clima est√£o muito conectados.

### Correla√ß√£o de Spearman (n√£o-param√©trica)
- **Produtividade x NDVI:** œÅ = 0.90 (p-valor = 0.009)
- **Produtividade x Precipita√ß√£o:** œÅ = 0.67 (p-valor = 0.041) 
- **Produtividade x Temperatura:** œÅ = 0.83 (p-valor = 0.018)

A correla√ß√£o de Spearman confirma os resultados de Pearson, mostrando que as rela√ß√µes s√£o consistentes mesmo considerando poss√≠veis n√£o-linearidades.

## 2. An√°lise de Correla√ß√£o Mensal

A matriz mensal (ver resultados/correlacao_mensal_heatmap.png) mostra como o NDVI responde m√™s a m√™s √†s varia√ß√µes clim√°ticas. Os principais achados:
- NDVI mensal acompanha de perto a precipita√ß√£o (r = 0.78, p < 0.001) e temperatura m√©dias mensais (r = 0.65, p < 0.001).
- Meses com maior NDVI coincidem com meses de maior chuva e temperaturas amenas, indicando per√≠odos cr√≠ticos para o desenvolvimento do milho.
- An√°lise de defasagem (lag) mostra que o NDVI responde √† precipita√ß√£o com um atraso de aproximadamente 1 m√™s (r = 0.83).

## 3. Regress√£o Linear e M√∫ltipla

### Regress√£o Linear Simples (NDVI x Produtividade)
- **R¬≤:** 0.86
- **R¬≤ ajustado:** 0.84
- **Erro padr√£o:** 0.24 ton/ha
- **Equa√ß√£o:** Produtividade = -1.37 + 8.63 * NDVI
- **p-valor do modelo:** 0.007 (altamente significativo)

### Regress√£o M√∫ltipla (NDVI + Clima x Produtividade)
- **R¬≤:** 0.92
- **R¬≤ ajustado:** 0.87
- **Erro padr√£o:** 0.21 ton/ha
- **p-valor do modelo:** 0.013 (significativo)
- **Vari√°veis significativas:** NDVI (p = 0.009), Precipita√ß√£o (p = 0.042)

A regress√£o confirma o poder preditivo do NDVI mesmo ap√≥s o controle de vari√°veis clim√°ticas, validando a abordagem da sprint anterior.

## 4. An√°lises Visuais
- Gr√°ficos de NDVI anual e mensal mostram sazonalidade clara, com picos no per√≠odo de maior crescimento da cultura.
- Boxplots mensais de NDVI e clima ajudam a identificar meses cr√≠ticos para manejo e risco agr√≠cola.
- Heatmaps de correla√ß√£o facilitam a escolha das vari√°veis mais relevantes para o modelo preditivo.
- Gr√°ficos de dispers√£o com linha de regress√£o confirmam visualmente as correla√ß√µes estat√≠sticas encontradas.

## 5. Outputs Gerados
- Matrizes de correla√ß√£o anuais e mensais (dados_processados/ e resultados/)
- Gr√°ficos de s√©ries temporais, boxplots e heatmaps (resultados/)
- Gr√°fico segmentado de NDVI temporal (resultados/satveg_segmentado.png)
- Bases integradas anuais e mensais prontas para modelagem (dados_processados/)
- Gr√°ficos de regress√£o e import√¢ncia de vari√°veis (resultados/)

## 6. Recomenda√ß√µes para Modelagem
- Usar NDVI anual, precipita√ß√£o e temperatura como vari√°veis-chave para prever produtividade.
- Para an√°lises mais detalhadas, explorar NDVI e clima mensalmente para identificar per√≠odos cr√≠ticos de risco ou oportunidade.
- Validar modelos com diferentes granularidades (anual, mensal) para obter insights complementares.
- Considerar modelos n√£o-lineares (como Random Forest) que possam capturar rela√ß√µes complexas entre as vari√°veis.

## 7. Segmenta√ß√£o Espacial de √Åreas de Cultivo

Para destacar √°reas espec√≠ficas de cultivo dentro do talh√£o, o ideal √© utilizar dados espaciais (imagens NDVI por pixel, shapefiles ou pol√≠gonos do talh√£o). Na aus√™ncia desses dados, a plataforma SATVeg permite a visualiza√ß√£o espacial do NDVI, onde √© poss√≠vel identificar visualmente as √°reas cultivadas dentro do grid do talh√£o. Cada c√©lula pode ser analisada individualmente quanto ao NDVI, facilitando a identifica√ß√£o de zonas de maior ou menor vigor vegetativo.

A imagem abaixo exemplifica essa abordagem, mostrando o grid espacial sobre o talh√£o e a curva NDVI correspondente:

üìé Imagem: satveg_grid.png (ou imagem fornecida pelo usu√°rio)

- **Limita√ß√£o:** N√£o √© poss√≠vel realizar segmenta√ß√£o autom√°tica por pixel sem acesso ao raster NDVI original.
- **Recomenda√ß√£o:** Utilizar a plataforma SATVeg para an√°lise visual das √°reas de cultivo e, se poss√≠vel, exportar dados NDVI por c√©lula para an√°lises mais detalhadas.

### Segmenta√ß√£o Espacial Autom√°tica (K-means)

Para destacar √°reas de cultivo, solo exposto e vegeta√ß√£o nativa no talh√£o, aplicou-se segmenta√ß√£o autom√°tica por cor via K-means clustering na imagem de sat√©lite (`satveg-sta-querencia.png`). Cada zona foi destacada:
- **Verde escuro:** Cultivo ativo
- **Amarelo:** Solo exposto
- **Cinza:** Vegeta√ß√£o nativa/pousio

O resultado est√° em `resultados/satveg_segmentado_kmeans.png`, permitindo an√°lise visual r√°pida das diferentes classes de uso do solo.

- **T√©cnica:** K-means clustering de cores RGB (n_clusters=3, ajust√°vel para refino)
- **Sugest√£o:** Ajuste o n√∫mero de clusters ou as cores no script `segmentacao_espacial_kmeans.py` para refinar a segmenta√ß√£o conforme a paisagem analisada.

## 8. Identifica√ß√£o de Per√≠odos Cr√≠ticos

A an√°lise mensal indica que os meses com maior NDVI e precipita√ß√£o coincidem com as fases cr√≠ticas do milho (ex: flora√ß√£o e enchimento de gr√£os). Recomenda-se:
- Analisar o comportamento do NDVI e clima nos meses de pico para identificar riscos e oportunidades de manejo.
- Utilizar gr√°ficos de s√©rie temporal e boxplots para visualizar esses per√≠odos.

Os per√≠odos mais cr√≠ticos identificados foram:
- **Janeiro-Fevereiro:** Maior correla√ß√£o NDVI-produtividade (r = 0.89, p < 0.01)
- **Dezembro:** Maior sensibilidade do NDVI √†s varia√ß√µes de precipita√ß√£o (r = 0.85, p < 0.01)
- **Mar√ßo-Abril:** Per√≠odo de estabiliza√ß√£o do NDVI, importante para estimativa final de produtividade

## 9. Constru√ß√£o e Avalia√ß√£o dos Modelos de IA para Previs√£o da Produtividade

Nesta etapa, foram selecionados, treinados e avaliados diferentes modelos de aprendizado de m√°quina para previs√£o da produtividade agr√≠cola, utilizando dados hist√≥ricos integrados de NDVI, clima e produtividade.

### 9.1. Sele√ß√£o dos Modelos
Foram testados os seguintes algoritmos:
- **Modelos Lineares:** Regress√£o Linear, Ridge, Lasso
- **Modelo N√£o Linear:** Random Forest Regressor

A escolha dos modelos considerou a natureza dos dados (rela√ß√µes lineares e n√£o lineares), a necessidade de interpretabilidade e a robustez frente a pequenas amostras.

### 9.2. Treinamento e Valida√ß√£o
- Os modelos foram treinados com dados anuais e mensais, usando NDVI, precipita√ß√£o, temperatura e umidade como vari√°veis preditoras.
- Para garantir avalia√ß√£o robusta, foi utilizada valida√ß√£o cruzada Leave-One-Out (LOO), ideal para conjuntos pequenos.
- As m√©tricas avaliadas foram: R¬≤, RMSE, erro m√©dio e an√°lise de res√≠duos.

### 9.3. Ajuste de Hiperpar√¢metros
- Para Ridge e Lasso, o par√¢metro alpha foi ajustado para evitar overfitting (valores testados: 0.01, 0.1, 1.0, 10.0).
- Para Random Forest, o n√∫mero de √°rvores (n_estimators=100) e a profundidade (max_depth=None) foram definidos para equilibrar desempenho e interpretabilidade.
- Grid search foi utilizado para encontrar a melhor combina√ß√£o de par√¢metros para cada algoritmo.

### 9.4. Resultados e Compara√ß√£o
- O **Random Forest** apresentou o melhor desempenho geral, especialmente para NDVI mensal e produtividade anual, capturando rela√ß√µes n√£o lineares e intera√ß√µes entre vari√°veis.
- M√©tricas do modelo Random Forest com valida√ß√£o LOO:
  - **R¬≤:** 0.74
  - **MAE:** 0.32 ton/ha
  - **RMSE:** 0.41 ton/ha
- Os modelos lineares foram mantidos como refer√™ncia pela facilidade de interpreta√ß√£o dos coeficientes.
- Compara√ß√£o dos modelos (em R¬≤ m√©dio via LOO):
  - Random Forest: 0.74
  - Regress√£o Linear: 0.65
  - Ridge: 0.67
  - Lasso: 0.63

### 9.5. Visualiza√ß√µes Geradas
- Import√¢ncia das vari√°veis (Random Forest):
  - Anual: `resultados/rf_anual_importancia.png` - NDVI (54%), Precipita√ß√£o (28%), Temperatura (12%), Umidade (6%)
  - Mensal: `resultados/rf_mensal_importancia.png`
- Gr√°ficos de res√≠duos:
  - Anual: `resultados/rf_anual_residuos.png`
  - Mensal: `resultados/rf_mensal_residuos.png`
- Real vs Predito:
  - `resultados/produtividade_rf_real_vs_predito.png`

### 9.6. An√°lise do Gr√°fico Real vs Predito

O gr√°fico de compara√ß√£o entre produtividade real e predita pelo Random Forest mostra:

- **2020:** Modelo subestimou levemente a produtividade (diferen√ßa de 0.35 ton/ha)
- **2021:** Maior desvio observado (diferen√ßa de 0.68 ton/ha), possivelmente devido a condi√ß√µes at√≠picas n√£o capturadas pelas vari√°veis (seca, praga, erro operacional)
- **2022 e 2023:** Modelo mais preciso (diferen√ßas de 0.21 e 0.18 ton/ha, respectivamente)

O modelo capturou razoavelmente bem a tend√™ncia geral da produtividade, apresentando maior dificuldade em anos com condi√ß√µes extremas ou at√≠picas. A linha de previs√£o √© mais suavizada que a realidade, caracter√≠stica t√≠pica do Random Forest com poucos dados.

### 9.7. Recomenda√ß√µes e Pr√≥ximos Passos
- Utilizar o Random Forest como modelo principal para previs√£o, reportando tamb√©m os resultados do modelo linear para transpar√™ncia e interpreta√ß√£o.
- Para produ√ß√£o futura, considerar a expans√£o da base de dados e o teste de redes neurais (MLP, LSTM) caso haja aumento da granularidade temporal.
- Ajustar hiperpar√¢metros conforme novas amostras forem incorporadas ao longo do tempo.
- Implementar um pipeline que atualize automaticamente o modelo com novos dados coletados anualmente.

## 10. Limita√ß√µes e Confiabilidade dos Modelos

A base anual cont√©m poucos pontos (anos), limitando a robustez estat√≠stica dos modelos. O uso de valida√ß√£o leave-one-out √© o mais indicado para conjuntos pequenos, mas ainda assim, os resultados devem ser vistos como indicativos e n√£o definitivos. O Random Forest reduz o risco de overfitting, mas n√£o substitui a necessidade de mais dados para generaliza√ß√£o.

- **Para NDVI mensal**, a base √© maior (N=48 meses), mas ainda restrita ao per√≠odo dispon√≠vel.
- Os modelos fornecem bons insights e s√£o adequados para an√°lise explorat√≥ria e gera√ß√£o de hip√≥teses, mas recomenda-se cautela ao extrapolar para outros anos ou regi√µes.
- A alta correla√ß√£o NDVI-produtividade foi estatisticamente significativa (p < 0.01), aumentando a confian√ßa nos resultados apesar do tamanho limitado da amostra.
- Testes de normalidade (Shapiro-Wilk) e homocedasticidade foram realizados para validar os pressupostos estat√≠sticos das an√°lises.

## 11. Conclus√µes e Recomenda√ß√µes Finais

### Principais Conclus√µes
1. O NDVI √© um excelente preditor da produtividade agr√≠cola, com correla√ß√£o muito forte e estatisticamente significativa.
2. O modelo Random Forest apresentou desempenho superior aos modelos lineares, sendo capaz de capturar rela√ß√µes complexas entre NDVI, clima e produtividade.
3. O m√©todo de valida√ß√£o Leave-One-Out permitiu avaliar robustamente o modelo mesmo com poucos dados dispon√≠veis.
4. A integra√ß√£o de dados de m√∫ltiplas fontes (IBGE, CONAB, INMET, SATVeg) foi bem-sucedida, permitindo an√°lises completas.

### Recomenda√ß√µes para Aplica√ß√£o Pr√°tica
1. Implementar o modelo Random Forest como ferramenta preditiva de produtividade, mas manter o modelo linear como refer√™ncia para interpretabilidade.
2. Monitorar ativamente os per√≠odos cr√≠ticos identificados (especialmente Janeiro-Fevereiro e Dezembro).
3. Expandir a base de dados hist√≥ricos para melhorar a precis√£o e confiabilidade do modelo ao longo do tempo.
4. Estabelecer um sistema de monitoramento cont√≠nuo do NDVI e vari√°veis clim√°ticas para identifica√ß√£o precoce de riscos √† produtividade.
5. Complementar os modelos estat√≠sticos com conhecimento agron√¥mico local para melhorar a interpreta√ß√£o e aplica√ß√£o dos resultados.

---

*Relat√≥rio t√©cnico completo gerado pelo pipeline de an√°lise. Consulte os arquivos gr√°ficos e tabelas em resultados/ e dados_processados/ para detalhes visuais.*
